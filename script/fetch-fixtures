#!/usr/bin/env bash

GRAMMARS_DIR=$(dirname $0)/../test/fixtures/grammars

fetch_grammar() {
  local organization=$1
  local grammar=$2
  local ref=$3
  local grammar_dir=${GRAMMARS_DIR}/${grammar}
  local grammar_url=https://github.com/${organization}/tree-sitter-${grammar}

  echo "Updating ${grammar} grammar..."

  if [ ! -d $grammar_dir ]; then
    git clone $grammar_url $grammar_dir --depth=1
  fi

  (
    cd $grammar_dir
    git fetch origin $ref --depth=1
    git reset --hard FETCH_HEAD
  )
}

fetch_grammar tree-sitter bash              master
fetch_grammar tree-sitter c                 master
fetch_grammar tree-sitter cpp               master
fetch_grammar tree-sitter embedded-template master
fetch_grammar tree-sitter go                master
fetch_grammar tree-sitter html              master
fetch_grammar tree-sitter java              master
fetch_grammar tree-sitter javascript        partial-order-precedences
fetch_grammar tree-sitter jsdoc             master
fetch_grammar tree-sitter json              master
fetch_grammar tree-sitter php               master
fetch_grammar tree-sitter python            master
fetch_grammar tree-sitter ruby              master
fetch_grammar tree-sitter rust              master
fetch_grammar tree-sitter typescript        master
fetch_grammar elixir-lang elixir            de20391afe5cb03ef1e8a8e43167e7b58cc52869
fetch_grammar fwcd        kotlin            0.2.11
fetch_grammar alex-pinkus swift             0.1.1-with-static-grammar.json
